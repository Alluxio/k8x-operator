{"ast":null,"code":"import { Alias } from '../nodes/Alias.js';\nimport { isNode, isPair, MAP, SEQ, isDocument } from '../nodes/identity.js';\nimport { Scalar } from '../nodes/Scalar.js';\nconst defaultTagPrefix = 'tag:yaml.org,2002:';\nfunction findTagObject(value, tagName, tags) {\n  if (tagName) {\n    var _match$find;\n    const match = tags.filter(t => t.tag === tagName);\n    const tagObj = (_match$find = match.find(t => !t.format)) !== null && _match$find !== void 0 ? _match$find : match[0];\n    if (!tagObj) throw new Error(\"Tag \".concat(tagName, \" not found\"));\n    return tagObj;\n  }\n  return tags.find(t => {\n    var _t$identify;\n    return ((_t$identify = t.identify) === null || _t$identify === void 0 ? void 0 : _t$identify.call(t, value)) && !t.format;\n  });\n}\nfunction createNode(value, tagName, ctx) {\n  var _tagName, _tagObj, _tagObj2;\n  if (isDocument(value)) value = value.contents;\n  if (isNode(value)) return value;\n  if (isPair(value)) {\n    var _ctx$schema$MAP$creat, _ctx$schema$MAP;\n    const map = (_ctx$schema$MAP$creat = (_ctx$schema$MAP = ctx.schema[MAP]).createNode) === null || _ctx$schema$MAP$creat === void 0 ? void 0 : _ctx$schema$MAP$creat.call(_ctx$schema$MAP, ctx.schema, null, ctx);\n    map.items.push(value);\n    return map;\n  }\n  if (value instanceof String || value instanceof Number || value instanceof Boolean || typeof BigInt !== 'undefined' && value instanceof BigInt // not supported everywhere\n  ) {\n    // https://tc39.es/ecma262/#sec-serializejsonproperty\n    value = value.valueOf();\n  }\n  const {\n    aliasDuplicateObjects,\n    onAnchor,\n    onTagObj,\n    schema,\n    sourceObjects\n  } = ctx;\n  // Detect duplicate references to the same object & use Alias nodes for all\n  // after first. The `ref` wrapper allows for circular references to resolve.\n  let ref = undefined;\n  if (aliasDuplicateObjects && value && typeof value === 'object') {\n    ref = sourceObjects.get(value);\n    if (ref) {\n      if (!ref.anchor) ref.anchor = onAnchor(value);\n      return new Alias(ref.anchor);\n    } else {\n      ref = {\n        anchor: null,\n        node: null\n      };\n      sourceObjects.set(value, ref);\n    }\n  }\n  if ((_tagName = tagName) !== null && _tagName !== void 0 && _tagName.startsWith('!!')) tagName = defaultTagPrefix + tagName.slice(2);\n  let tagObj = findTagObject(value, tagName, schema.tags);\n  if (!tagObj) {\n    if (value && typeof value.toJSON === 'function') {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      value = value.toJSON();\n    }\n    if (!value || typeof value !== 'object') {\n      const node = new Scalar(value);\n      if (ref) ref.node = node;\n      return node;\n    }\n    tagObj = value instanceof Map ? schema[MAP] : Symbol.iterator in Object(value) ? schema[SEQ] : schema[MAP];\n  }\n  if (onTagObj) {\n    onTagObj(tagObj);\n    delete ctx.onTagObj;\n  }\n  const node = (_tagObj = tagObj) !== null && _tagObj !== void 0 && _tagObj.createNode ? tagObj.createNode(ctx.schema, value, ctx) : typeof ((_tagObj2 = tagObj) === null || _tagObj2 === void 0 || (_tagObj2 = _tagObj2.nodeClass) === null || _tagObj2 === void 0 ? void 0 : _tagObj2.from) === 'function' ? tagObj.nodeClass.from(ctx.schema, value, ctx) : new Scalar(value);\n  if (tagName) node.tag = tagName;else if (!tagObj.default) node.tag = tagObj.tag;\n  if (ref) ref.node = node;\n  return node;\n}\nexport { createNode };","map":{"version":3,"names":["Alias","isNode","isPair","MAP","SEQ","isDocument","Scalar","defaultTagPrefix","findTagObject","value","tagName","tags","_match$find","match","filter","t","tag","tagObj","find","format","Error","concat","_t$identify","identify","call","createNode","ctx","_tagName","_tagObj","_tagObj2","contents","_ctx$schema$MAP$creat","_ctx$schema$MAP","map","schema","items","push","String","Number","Boolean","BigInt","valueOf","aliasDuplicateObjects","onAnchor","onTagObj","sourceObjects","ref","undefined","get","anchor","node","set","startsWith","slice","toJSON","Map","Symbol","iterator","Object","nodeClass","from","default"],"sources":["/Users/shoukaiwen/WebstormProjects/alluxio-k8s-operator-ui/node_modules/yaml/browser/dist/doc/createNode.js"],"sourcesContent":["import { Alias } from '../nodes/Alias.js';\nimport { isNode, isPair, MAP, SEQ, isDocument } from '../nodes/identity.js';\nimport { Scalar } from '../nodes/Scalar.js';\n\nconst defaultTagPrefix = 'tag:yaml.org,2002:';\nfunction findTagObject(value, tagName, tags) {\n    if (tagName) {\n        const match = tags.filter(t => t.tag === tagName);\n        const tagObj = match.find(t => !t.format) ?? match[0];\n        if (!tagObj)\n            throw new Error(`Tag ${tagName} not found`);\n        return tagObj;\n    }\n    return tags.find(t => t.identify?.(value) && !t.format);\n}\nfunction createNode(value, tagName, ctx) {\n    if (isDocument(value))\n        value = value.contents;\n    if (isNode(value))\n        return value;\n    if (isPair(value)) {\n        const map = ctx.schema[MAP].createNode?.(ctx.schema, null, ctx);\n        map.items.push(value);\n        return map;\n    }\n    if (value instanceof String ||\n        value instanceof Number ||\n        value instanceof Boolean ||\n        (typeof BigInt !== 'undefined' && value instanceof BigInt) // not supported everywhere\n    ) {\n        // https://tc39.es/ecma262/#sec-serializejsonproperty\n        value = value.valueOf();\n    }\n    const { aliasDuplicateObjects, onAnchor, onTagObj, schema, sourceObjects } = ctx;\n    // Detect duplicate references to the same object & use Alias nodes for all\n    // after first. The `ref` wrapper allows for circular references to resolve.\n    let ref = undefined;\n    if (aliasDuplicateObjects && value && typeof value === 'object') {\n        ref = sourceObjects.get(value);\n        if (ref) {\n            if (!ref.anchor)\n                ref.anchor = onAnchor(value);\n            return new Alias(ref.anchor);\n        }\n        else {\n            ref = { anchor: null, node: null };\n            sourceObjects.set(value, ref);\n        }\n    }\n    if (tagName?.startsWith('!!'))\n        tagName = defaultTagPrefix + tagName.slice(2);\n    let tagObj = findTagObject(value, tagName, schema.tags);\n    if (!tagObj) {\n        if (value && typeof value.toJSON === 'function') {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n            value = value.toJSON();\n        }\n        if (!value || typeof value !== 'object') {\n            const node = new Scalar(value);\n            if (ref)\n                ref.node = node;\n            return node;\n        }\n        tagObj =\n            value instanceof Map\n                ? schema[MAP]\n                : Symbol.iterator in Object(value)\n                    ? schema[SEQ]\n                    : schema[MAP];\n    }\n    if (onTagObj) {\n        onTagObj(tagObj);\n        delete ctx.onTagObj;\n    }\n    const node = tagObj?.createNode\n        ? tagObj.createNode(ctx.schema, value, ctx)\n        : typeof tagObj?.nodeClass?.from === 'function'\n            ? tagObj.nodeClass.from(ctx.schema, value, ctx)\n            : new Scalar(value);\n    if (tagName)\n        node.tag = tagName;\n    else if (!tagObj.default)\n        node.tag = tagObj.tag;\n    if (ref)\n        ref.node = node;\n    return node;\n}\n\nexport { createNode };\n"],"mappings":"AAAA,SAASA,KAAK,QAAQ,mBAAmB;AACzC,SAASC,MAAM,EAAEC,MAAM,EAAEC,GAAG,EAAEC,GAAG,EAAEC,UAAU,QAAQ,sBAAsB;AAC3E,SAASC,MAAM,QAAQ,oBAAoB;AAE3C,MAAMC,gBAAgB,GAAG,oBAAoB;AAC7C,SAASC,aAAaA,CAACC,KAAK,EAAEC,OAAO,EAAEC,IAAI,EAAE;EACzC,IAAID,OAAO,EAAE;IAAA,IAAAE,WAAA;IACT,MAAMC,KAAK,GAAGF,IAAI,CAACG,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKN,OAAO,CAAC;IACjD,MAAMO,MAAM,IAAAL,WAAA,GAAGC,KAAK,CAACK,IAAI,CAACH,CAAC,IAAI,CAACA,CAAC,CAACI,MAAM,CAAC,cAAAP,WAAA,cAAAA,WAAA,GAAIC,KAAK,CAAC,CAAC,CAAC;IACrD,IAAI,CAACI,MAAM,EACP,MAAM,IAAIG,KAAK,QAAAC,MAAA,CAAQX,OAAO,eAAY,CAAC;IAC/C,OAAOO,MAAM;EACjB;EACA,OAAON,IAAI,CAACO,IAAI,CAACH,CAAC;IAAA,IAAAO,WAAA;IAAA,OAAI,EAAAA,WAAA,GAAAP,CAAC,CAACQ,QAAQ,cAAAD,WAAA,uBAAVA,WAAA,CAAAE,IAAA,CAAAT,CAAC,EAAYN,KAAK,CAAC,KAAI,CAACM,CAAC,CAACI,MAAM;EAAA,EAAC;AAC3D;AACA,SAASM,UAAUA,CAAChB,KAAK,EAAEC,OAAO,EAAEgB,GAAG,EAAE;EAAA,IAAAC,QAAA,EAAAC,OAAA,EAAAC,QAAA;EACrC,IAAIxB,UAAU,CAACI,KAAK,CAAC,EACjBA,KAAK,GAAGA,KAAK,CAACqB,QAAQ;EAC1B,IAAI7B,MAAM,CAACQ,KAAK,CAAC,EACb,OAAOA,KAAK;EAChB,IAAIP,MAAM,CAACO,KAAK,CAAC,EAAE;IAAA,IAAAsB,qBAAA,EAAAC,eAAA;IACf,MAAMC,GAAG,IAAAF,qBAAA,GAAG,CAAAC,eAAA,GAAAN,GAAG,CAACQ,MAAM,CAAC/B,GAAG,CAAC,EAACsB,UAAU,cAAAM,qBAAA,uBAA1BA,qBAAA,CAAAP,IAAA,CAAAQ,eAAA,EAA6BN,GAAG,CAACQ,MAAM,EAAE,IAAI,EAAER,GAAG,CAAC;IAC/DO,GAAG,CAACE,KAAK,CAACC,IAAI,CAAC3B,KAAK,CAAC;IACrB,OAAOwB,GAAG;EACd;EACA,IAAIxB,KAAK,YAAY4B,MAAM,IACvB5B,KAAK,YAAY6B,MAAM,IACvB7B,KAAK,YAAY8B,OAAO,IACvB,OAAOC,MAAM,KAAK,WAAW,IAAI/B,KAAK,YAAY+B,MAAO,CAAC;EAAA,EAC7D;IACE;IACA/B,KAAK,GAAGA,KAAK,CAACgC,OAAO,CAAC,CAAC;EAC3B;EACA,MAAM;IAAEC,qBAAqB;IAAEC,QAAQ;IAAEC,QAAQ;IAAEV,MAAM;IAAEW;EAAc,CAAC,GAAGnB,GAAG;EAChF;EACA;EACA,IAAIoB,GAAG,GAAGC,SAAS;EACnB,IAAIL,qBAAqB,IAAIjC,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7DqC,GAAG,GAAGD,aAAa,CAACG,GAAG,CAACvC,KAAK,CAAC;IAC9B,IAAIqC,GAAG,EAAE;MACL,IAAI,CAACA,GAAG,CAACG,MAAM,EACXH,GAAG,CAACG,MAAM,GAAGN,QAAQ,CAAClC,KAAK,CAAC;MAChC,OAAO,IAAIT,KAAK,CAAC8C,GAAG,CAACG,MAAM,CAAC;IAChC,CAAC,MACI;MACDH,GAAG,GAAG;QAAEG,MAAM,EAAE,IAAI;QAAEC,IAAI,EAAE;MAAK,CAAC;MAClCL,aAAa,CAACM,GAAG,CAAC1C,KAAK,EAAEqC,GAAG,CAAC;IACjC;EACJ;EACA,KAAAnB,QAAA,GAAIjB,OAAO,cAAAiB,QAAA,eAAPA,QAAA,CAASyB,UAAU,CAAC,IAAI,CAAC,EACzB1C,OAAO,GAAGH,gBAAgB,GAAGG,OAAO,CAAC2C,KAAK,CAAC,CAAC,CAAC;EACjD,IAAIpC,MAAM,GAAGT,aAAa,CAACC,KAAK,EAAEC,OAAO,EAAEwB,MAAM,CAACvB,IAAI,CAAC;EACvD,IAAI,CAACM,MAAM,EAAE;IACT,IAAIR,KAAK,IAAI,OAAOA,KAAK,CAAC6C,MAAM,KAAK,UAAU,EAAE;MAC7C;MACA7C,KAAK,GAAGA,KAAK,CAAC6C,MAAM,CAAC,CAAC;IAC1B;IACA,IAAI,CAAC7C,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;MACrC,MAAMyC,IAAI,GAAG,IAAI5C,MAAM,CAACG,KAAK,CAAC;MAC9B,IAAIqC,GAAG,EACHA,GAAG,CAACI,IAAI,GAAGA,IAAI;MACnB,OAAOA,IAAI;IACf;IACAjC,MAAM,GACFR,KAAK,YAAY8C,GAAG,GACdrB,MAAM,CAAC/B,GAAG,CAAC,GACXqD,MAAM,CAACC,QAAQ,IAAIC,MAAM,CAACjD,KAAK,CAAC,GAC5ByB,MAAM,CAAC9B,GAAG,CAAC,GACX8B,MAAM,CAAC/B,GAAG,CAAC;EAC7B;EACA,IAAIyC,QAAQ,EAAE;IACVA,QAAQ,CAAC3B,MAAM,CAAC;IAChB,OAAOS,GAAG,CAACkB,QAAQ;EACvB;EACA,MAAMM,IAAI,GAAG,CAAAtB,OAAA,GAAAX,MAAM,cAAAW,OAAA,eAANA,OAAA,CAAQH,UAAU,GACzBR,MAAM,CAACQ,UAAU,CAACC,GAAG,CAACQ,MAAM,EAAEzB,KAAK,EAAEiB,GAAG,CAAC,GACzC,SAAAG,QAAA,GAAOZ,MAAM,cAAAY,QAAA,gBAAAA,QAAA,GAANA,QAAA,CAAQ8B,SAAS,cAAA9B,QAAA,uBAAjBA,QAAA,CAAmB+B,IAAI,MAAK,UAAU,GACzC3C,MAAM,CAAC0C,SAAS,CAACC,IAAI,CAAClC,GAAG,CAACQ,MAAM,EAAEzB,KAAK,EAAEiB,GAAG,CAAC,GAC7C,IAAIpB,MAAM,CAACG,KAAK,CAAC;EAC3B,IAAIC,OAAO,EACPwC,IAAI,CAAClC,GAAG,GAAGN,OAAO,CAAC,KAClB,IAAI,CAACO,MAAM,CAAC4C,OAAO,EACpBX,IAAI,CAAClC,GAAG,GAAGC,MAAM,CAACD,GAAG;EACzB,IAAI8B,GAAG,EACHA,GAAG,CAACI,IAAI,GAAGA,IAAI;EACnB,OAAOA,IAAI;AACf;AAEA,SAASzB,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}